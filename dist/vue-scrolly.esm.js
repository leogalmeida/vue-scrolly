var e,n,t,o,r,i,a,s,l,c,d,u,h,A,p,f=!1;function v(){if(!f){f=!0;var v=navigator.userAgent,m=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(v),b=/(Mac OS X)|(Windows)|(Linux)/.exec(v);if(u=/\b(iPhone|iP[ao]d)/.exec(v),h=/\b(iP[ao]d)/.exec(v),c=/Android/i.exec(v),A=/FBAN\/\w+;/i.exec(v),p=/Mobile/i.exec(v),d=!!/Win64/.exec(v),m){(e=m[1]?parseFloat(m[1]):m[5]?parseFloat(m[5]):NaN)&&document&&document.documentMode&&(e=document.documentMode);var y=/(?:Trident\/(\d+.\d+))/.exec(v);i=y?parseFloat(y[1])+4:e,n=m[2]?parseFloat(m[2]):NaN,t=m[3]?parseFloat(m[3]):NaN,(o=m[4]?parseFloat(m[4]):NaN)?(m=/(?:Chrome\/(\d+\.\d+))/.exec(v),r=m&&m[1]?parseFloat(m[1]):NaN):r=NaN}else e=n=t=r=o=NaN;if(b){if(b[1]){var g=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(v);a=!g||parseFloat(g[1].replace("_","."))}else a=!1;s=!!b[2],l=!!b[3]}else a=s=l=!1}}var m,b={ie:function(){return v()||e},ieCompatibilityMode:function(){return v()||i>e},ie64:function(){return b.ie()&&d},firefox:function(){return v()||n},opera:function(){return v()||t},webkit:function(){return v()||o},safari:function(){return b.webkit()},chrome:function(){return v()||r},windows:function(){return v()||s},osx:function(){return v()||a},linux:function(){return v()||l},iphone:function(){return v()||u},mobile:function(){return v()||u||h||c||p},nativeApp:function(){return v()||A},android:function(){return v()||c},ipad:function(){return v()||h}},y=b,g=!("undefined"==typeof window||!window.document||!window.document.createElement),w={canUseDOM:g,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:g&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:g&&!!window.screen,isInWorker:!g};w.canUseDOM&&(m=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("",""));var x=function(e,n){if(!w.canUseDOM||n&&!("addEventListener"in document))return!1;var t="on"+e,o=t in document;if(!o){var r=document.createElement("div");r.setAttribute(t,"return;"),o="function"==typeof r[t]}return!o&&m&&"wheel"===e&&(o=document.implementation.hasFeature("Events.wheel","3.0")),o},E=10,S=40,L=800;function C(e){var n=0,t=0,o=0,r=0;return"detail"in e&&(t=e.detail),"wheelDelta"in e&&(t=-e.wheelDelta/120),"wheelDeltaY"in e&&(t=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(n=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(n=t,t=0),o=n*E,r=t*E,"deltaY"in e&&(r=e.deltaY),"deltaX"in e&&(o=e.deltaX),(o||r)&&e.deltaMode&&(1==e.deltaMode?(o*=S,r*=S):(o*=L,r*=L)),o&&!n&&(n=o<1?-1:1),r&&!t&&(t=r<1?-1:1),{spinX:n,spinY:t,pixelX:o,pixelY:r}}C.getEventType=function(){return y.firefox()?"DOMMouseScroll":x("wheel")?"wheel":"mousewheel"};var M=C;function k(e){return 100*e+"%"}var _=!1;try{var B=Object.defineProperty({},"passive",{get:function(){_=!0}});window.addEventListener("test",null,B)}catch(e){}var T,D,W,N,U,O="MutationObserver"in window,X="mousemove",Y="mouseup",H={name:"scrolly",props:{parentScroll:{type:Boolean,default:!0},passiveScroll:{type:Boolean,default:!1}},data:function(){return{container:null,viewport:null,barX:null,barY:null,onMouseWheelHandler:null,onDomChangeHandler:null,mutationObserver:null,isScrolling:!1}},computed:{classnames:function(){return["scrolly",this.isScrolling?"is-scrolling":""]}},mounted:function(){this.$nextTick(function(){for(var e,n,t,o,r=this.$el,i=r.childNodes,a=0;o=i[a++];){var s=o.className;s&&(s.match("scrolly-viewport")&&(e=o),s.match("axis-x")&&(n=o),s.match("axis-y")&&(t=o))}if(e&&(n||t)){var l=this.onMouseWheel.bind(this),c=!!this.parentScroll&&this.passiveScroll;r.addEventListener("wheel",l,!!_&&{passive:c});var d=this.onKeyDown.bind(this);r.addEventListener("keydown",d);var u,h=this.onDomChange.bind(this);O?(u=new MutationObserver(h)).observe(e,{childList:!0,characterData:!0,subtree:!0,attributes:!0}):(e.addEventListener("DOMSubtreeModified",h),e.addEventListener("propertychange",h)),Object.assign(this,{container:r,viewport:e,barX:n,barY:t,onMouseWheelHandler:l,onDomChangeHandler:h,mutationObserver:u})}})},methods:{onMouseEnter:function(){this.refreshScrollLayout()},onMouseDown:function(e){var n=e.target,t=e.pageX,o=e.pageY,r=n.className;if(r.match("scrolly-bar")){var i={},a=this,s=this.barX,l=this.barY,c=(this.container,this.viewport),d=window.addEventListener,u=window.removeEventListener,h=r.match("axis-x"),A=r.match("axis-y"),p=n.offsetTop,f=n.offsetLeft;a.isScrolling=!0,d("mousemove",v),d("mouseup",function e(){a.isScrolling=!1,u(Y,e),u(X,v)})}function v(e){e.preventDefault();var r=e.pageX,d=e.pageY;if(h){var u=c.scrollLeft,v=c.scrollWidth,m=c.offsetWidth,b=n.offsetWidth,y=m-b,g=f+(r-t);g<0&&(g=0),g>y&&(g=y),n.style.left=k(g/m),c.scrollLeft=g/y*(v-m);var w=g<0,x=g>y,E=w||x;i.x=s.scrollLayout={barX:s,scrollLeft:u,scrollWidth:v,viewportWidth:m,barWidth:b,barLeft:g,minBarLeft:0,maxBarLeft:y,visible:!0,onLeftEdge:w,onRightEdge:x,onEdge:E,canUnlockParentScroll:!1,canScrollParent:!1}}if(A){var S=c.scrollTop,L=c.scrollHeight,C=c.offsetHeight,M=n.offsetHeight,_=C-M,B=p+(d-o);B<0&&(B=0),B>_&&(B=_),n.style.top=k(B/C),c.scrollTop=B/_*(L-C);var T=B<=0,D=B>=_,W=T||D;i.y=l.scrollLayout={barY:l,scrollTop:S,scrollHeight:L,viewportHeight:C,barHeight:M,barTop:B,minBarTop:0,maxBarTop:_,onTopEdge:T,onBottomEdge:D,onEdge:W,visible:!0,canUnlockParentScroll:!1,canScrollParent:!1,scrolled:!0}}a.$emit("scrollchange",i)}},onMouseWheel:function(e){var n=M(e),t=n.pixelX,o=n.pixelY,r=this.refreshScrollLayout(t,o),i=r.x,a=r.y;if(!this.passiveScroll){var s=i&&i.canScrollParent,l=a&&a.canScrollParent;(!this.parentScroll||!s&&!l)&&e.preventDefault()}},onMouseLeave:function(e){var n=this.barX,t=this.barY;n&&(n.scrollLayout=null),t&&(t.scrollLayout=null)},onKeyDown:function(e){var n=this.container;switch(e.which){case 37:this.refreshScrollLayout(-20,0);break;case 38:this.refreshScrollLayout(0,-20);break;case 39:this.refreshScrollLayout(20,0);break;case 40:this.refreshScrollLayout(0,20);break;case 33:this.refreshScrollLayout(0,10-n.clientHeight);break;case 34:this.refreshScrollLayout(0,n.clientHeight-10);break;default:return}},onDomChange:(T=function(){this.refreshScrollLayout()},D=250,D||(D=250),function(){var e=W||this,n=+new Date,t=arguments;N&&n<N+D?(clearTimeout(U),U=setTimeout(function(){N=n,T.apply(e,t)},D)):(N=n,T.apply(e,t))}),refreshScrollLayout:function(e,n){void 0===e&&(e=0),void 0===n&&(n=0);var t={},o=this.viewport,r=this.barX,i=this.barY;if(r){var a=0!==e;o.scrollLeft+=e;var s=o.scrollLeft,l=o.scrollWidth,c=o.offsetWidth,d=r.style;d.visibility="hidden",d.display="block",d.width=k(c/l);var u=r.offsetWidth,h=c-u,A=s/(l-c)*h||0,p=A<0,f=A>h,v=p||f;p&&(A=0),f&&(A=h),d.left=k(A/c);var m=u<c;d.display=m?"block":"none",d.visibility="visible";var b=Math.abs(e)>25,y=r.scrollLayout||{},g=y.onEdge,w=y.canUnlockParentScroll,x=!!(y.canScrollParent||g&&w);t.x=r.scrollLayout={barX:r,scrollLeft:s,scrollWidth:l,viewportWidth:c,barWidth:u,barLeft:A,minBarLeft:0,maxBarLeft:h,visible:m,onLeftEdge:p,onRightEdge:f,onEdge:v,visible:m,canUnlockParentScroll:b,canScrollParent:x,scrolled:a}}if(i){var E=0!==n;o.scrollTop+=n;var S=o.scrollTop,L=o.scrollHeight,C=o.offsetHeight,M=i.style;M.visibility="hidden",M.display="block",M.height=k(C/L);var _=i.offsetHeight,B=C-_,T=S/(L-C)*B||0,D=T<=0,W=T>=B,N=D||W;D&&(T=0),W&&(T=B),M.top=k(T/C);var U=_<C;M.display=U?"block":"none",M.visibility="visible";var O=Math.abs(n)>25,X=i.scrollLayout||{},Y=X.onEdge,H=X.canUnlockParentScroll,P=X.canScrollParent,F=!(!N||!(P||Y&&H));t.y=i.scrollLayout={barY:i,scrollTop:S,scrollHeight:L,viewportHeight:C,barHeight:_,barTop:T,minBarTop:0,maxBarTop:B,onTopEdge:D,onBottomEdge:W,onEdge:N,visible:U,canUnlockParentScroll:O,canScrollParent:F,scrolled:E}}return this.$emit("scrollchange",t),t}},beforeDestroy:function(){var e=this.container,n=this.viewport,t=(this.barX,this.barY,this.onMouseWheelHandler),o=this.onDomChangeHandler,r=this.mutationObserver;r&&r.disconnect(),O||(n.removeEventListener("DOMSubtreeModified",o),n.removeEventListener("propertychange",o)),e.removeEventListener("wheel",t)}};var P=function(e,n,t,o,r,i,a,s,l,c){"boolean"!=typeof a&&(l=s,s=a,a=!1);var d,u="function"==typeof t?t.options:t;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,r&&(u.functional=!0)),o&&(u._scopeId=o),i?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(i)},u._ssrRegister=d):n&&(d=a?function(){n.call(this,c(this.$root.$options.shadowRoot))}:function(e){n.call(this,s(e))}),d)if(u.functional){var h=u.render;u.render=function(e,n){return d.call(n),h(e,n)}}else{var A=u.beforeCreate;u.beforeCreate=A?[].concat(A,d):[d]}return t},F="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());var I=document.head||document.getElementsByTagName("head")[0],$={};var R=function(e){return function(e,n){return function(e,n){var t=F?n.media||"default":e,o=$[t]||($[t]={ids:new Set,styles:[]});if(!o.ids.has(e)){o.ids.add(e);var r=n.source;if(n.map&&(r+="\n/*# sourceURL="+n.map.sources[0]+" */",r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n.map))))+" */"),o.element||(o.element=document.createElement("style"),o.element.type="text/css",n.media&&o.element.setAttribute("media",n.media),I.appendChild(o.element)),"styleSheet"in o.element)o.styles.push(r),o.element.styleSheet.cssText=o.styles.filter(Boolean).join("\n");else{var i=o.ids.size-1,a=document.createTextNode(r),s=o.element.childNodes;s[i]&&o.element.removeChild(s[i]),s.length?o.element.insertBefore(a,s[i]):o.element.appendChild(a)}}}(e,n)}},z=H,V=function(){var e=this.$createElement;return(this._self._c||e)("div",{class:this.classnames,attrs:{tabindex:"1"},on:{mouseenter:this.onMouseEnter,mousedown:this.onMouseDown,mouseleave:this.onMouseLeave}},[this._t("default")],2)};V._withStripped=!0;var j=P({render:V,staticRenderFns:[]},function(e){e&&e("data-v-72aacf74_0",{source:'.scrolly {\n  position: relative;\n}\n.scrolly .scrolly-bar {\n    opacity: 0;\n}\n.scrolly:hover .scrolly-bar, .scrolly.is-scrolling .scrolly-bar {\n    opacity: 1;\n}\n.scrolly-viewport {\n  position: absolute;\n  overflow: hidden;\n  width: 100%;\n  height: 100%;\n  z-index: 1;\n}\n.scrolly-bar {\n  position: absolute;\n  border: 7px solid transparent;\n  cursor: pointer;\n  z-index: 2;\n  transition: opacity .1s ease;\n}\n.scrolly-bar:before {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    content: " ";\n    background: rgba(0, 0, 0, 0.3);\n    border-radius: 7px;\n    transition: background .2s ease;\n}\n.scrolly-bar:hover:before {\n    background: rgba(0, 0, 0, 0.6);\n}\n.scrolly-bar.axis-x {\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  height: 21px;\n  min-width: 20%;\n  max-width: 100%;\n}\n.scrolly-bar.axis-y {\n  top: 0;\n  right: 0;\n  width: 21px;\n  height: 100%;\n  min-height: 20%;\n  max-height: 100%;\n}\n\n/*# sourceMappingURL=Scrolly.vue.map */',map:{version:3,sources:["/home/leo/work/vue-scrolly/src/Scrolly.vue","Scrolly.vue"],names:[],mappings:"AAWA;EACA,kBAAA;AAAA;AADA;IAIA,UAAA;AAAA;AAJA;IAUA,UAAA;AAAA;AAKA;EACA,kBAAA;EACA,gBAAA;EACA,WAAA;EACA,YAAA;EACA,UAAA;AAAA;AAGA;EACA,kBAAA;EACA,6BAAA;EACA,eAAA;EACA,UAAA;EACA,4BAAA;AAAA;AALA;IAQA,kBAAA;IACA,WAAA;IACA,YAAA;IACA,YAAA;IACA,8BAAA;IACA,kBAtCA;IAuCA,+BAAA;AAAA;AAdA;IAmBA,8BAAA;AAAA;AAKA;EACA,OAAA;EACA,SAAA;EACA,WAAA;EACA,YAAA;EACA,cAAA;EACA,eAAA;AAAA;AAGA;EACA,MAAA;EACA,QAAA;EACA,WAAA;EACA,YAAA;EACA,eAAA;EACA,gBAAA;AAAA;;AC1BA,sCAAsC",file:"Scrolly.vue",sourcesContent:['<template>\n<div :class="classnames" @mouseenter="onMouseEnter" @mousedown="onMouseDown" @mouseleave="onMouseLeave" tabindex="1">\n  <slot></slot>\n</div>\n</template>\n\n<script src="./Scrolly.js"><\/script>\n\n<style lang="scss">\n$scrolly-bar-size: 7px;\n\n.scrolly {\n  position: relative;\n\n  .scrolly-bar {\n    opacity: 0;\n  }\n\n  &:hover,\n  &.is-scrolling {\n    .scrolly-bar {\n      opacity: 1;\n    }\n  }\n}\n\n.scrolly-viewport {\n  position: absolute;\n  overflow: hidden;\n  width: 100%;\n  height: 100%;\n  z-index: 1;\n}\n\n.scrolly-bar {\n  position: absolute;\n  border: $scrolly-bar-size solid transparent;\n  cursor: pointer;\n  z-index: 2;\n  transition: opacity .1s ease;\n\n  &:before {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    content: " ";\n    background: rgba(0, 0, 0, 0.3);\n    border-radius: $scrolly-bar-size;\n    transition: background .2s ease;\n  }\n\n  &:hover {\n    &:before {\n      background: rgba(0, 0, 0, 0.6);\n    }\n  }\n}\n\n.scrolly-bar.axis-x {\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  height: $scrolly-bar-size * 3;\n  min-width: 20%;\n  max-width: 100%;\n}\n\n.scrolly-bar.axis-y {\n  top: 0;\n  right: 0;\n  width: $scrolly-bar-size * 3;\n  height: 100%;\n  min-height: 20%;\n  max-height: 100%;\n}\n</style>\n','.scrolly {\n  position: relative; }\n  .scrolly .scrolly-bar {\n    opacity: 0; }\n  .scrolly:hover .scrolly-bar, .scrolly.is-scrolling .scrolly-bar {\n    opacity: 1; }\n\n.scrolly-viewport {\n  position: absolute;\n  overflow: hidden;\n  width: 100%;\n  height: 100%;\n  z-index: 1; }\n\n.scrolly-bar {\n  position: absolute;\n  border: 7px solid transparent;\n  cursor: pointer;\n  z-index: 2;\n  transition: opacity .1s ease; }\n  .scrolly-bar:before {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    content: " ";\n    background: rgba(0, 0, 0, 0.3);\n    border-radius: 7px;\n    transition: background .2s ease; }\n  .scrolly-bar:hover:before {\n    background: rgba(0, 0, 0, 0.6); }\n\n.scrolly-bar.axis-x {\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  height: 21px;\n  min-width: 20%;\n  max-width: 100%; }\n\n.scrolly-bar.axis-y {\n  top: 0;\n  right: 0;\n  width: 21px;\n  height: 100%;\n  min-height: 20%;\n  max-height: 100%; }\n\n/*# sourceMappingURL=Scrolly.vue.map */']},media:void 0})},z,void 0,!1,void 0,R,void 0),K={name:"scrolly-viewport",computed:{classnames:function(){return["scrolly-viewport"]}}},G=function(){var e=this.$createElement;return(this._self._c||e)("div",{class:this.classnames},[this._t("default")],2)};G._withStripped=!0;var J=P({render:G,staticRenderFns:[]},void 0,K,void 0,!1,void 0,void 0,void 0),Q={name:"scrolly-bar",props:{axis:{type:String,default:"y"}},computed:{classnames:function(){return["scrolly-bar","axis-"+this.axis]}}},Z=function(){var e=this.$createElement;return(this._self._c||e)("div",{class:this.classnames},[this._t("default")],2)};Z._withStripped=!0;var q=P({render:Z,staticRenderFns:[]},void 0,Q,void 0,!1,void 0,void 0,void 0);"undefined"!=typeof window&&window.Vue&&(window.Vue.component("scrolly",j),window.Vue.component("scrolly-viewport",J),window.Vue.component("scrolly-bar",q));export{j as Scrolly,J as ScrollyViewport,q as ScrollyBar};
