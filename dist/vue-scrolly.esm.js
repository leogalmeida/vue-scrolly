var e,n,t,o,r,i,a,s,l,c,d,h,u,A,p,v=!1;function f(){if(!v){v=!0;var f=navigator.userAgent,m=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(f),b=/(Mac OS X)|(Windows)|(Linux)/.exec(f);if(h=/\b(iPhone|iP[ao]d)/.exec(f),u=/\b(iP[ao]d)/.exec(f),c=/Android/i.exec(f),A=/FBAN\/\w+;/i.exec(f),p=/Mobile/i.exec(f),d=!!/Win64/.exec(f),m){(e=m[1]?parseFloat(m[1]):m[5]?parseFloat(m[5]):NaN)&&document&&document.documentMode&&(e=document.documentMode);var y=/(?:Trident\/(\d+.\d+))/.exec(f);i=y?parseFloat(y[1])+4:e,n=m[2]?parseFloat(m[2]):NaN,t=m[3]?parseFloat(m[3]):NaN,(o=m[4]?parseFloat(m[4]):NaN)?(m=/(?:Chrome\/(\d+\.\d+))/.exec(f),r=m&&m[1]?parseFloat(m[1]):NaN):r=NaN}else e=n=t=r=o=NaN;if(b){if(b[1]){var g=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(f);a=!g||parseFloat(g[1].replace("_","."))}else a=!1;s=!!b[2],l=!!b[3]}else a=s=l=!1}}var m,b={ie:function(){return f()||e},ieCompatibilityMode:function(){return f()||i>e},ie64:function(){return b.ie()&&d},firefox:function(){return f()||n},opera:function(){return f()||t},webkit:function(){return f()||o},safari:function(){return b.webkit()},chrome:function(){return f()||r},windows:function(){return f()||s},osx:function(){return f()||a},linux:function(){return f()||l},iphone:function(){return f()||h},mobile:function(){return f()||h||u||c||p},nativeApp:function(){return f()||A},android:function(){return f()||c},ipad:function(){return f()||u}},y=b,g=!("undefined"==typeof window||!window.document||!window.document.createElement),w={canUseDOM:g,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:g&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:g&&!!window.screen,isInWorker:!g};w.canUseDOM&&(m=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("",""));var S=function(e,n){if(!w.canUseDOM||n&&!("addEventListener"in document))return!1;var t="on"+e,o=t in document;if(!o){var r=document.createElement("div");r.setAttribute(t,"return;"),o="function"==typeof r[t]}return!o&&m&&"wheel"===e&&(o=document.implementation.hasFeature("Events.wheel","3.0")),o},x=10,E=40,L=800;function C(e){var n=0,t=0,o=0,r=0;return"detail"in e&&(t=e.detail),"wheelDelta"in e&&(t=-e.wheelDelta/120),"wheelDeltaY"in e&&(t=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(n=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(n=t,t=0),o=n*x,r=t*x,"deltaY"in e&&(r=e.deltaY),"deltaX"in e&&(o=e.deltaX),(o||r)&&e.deltaMode&&(1==e.deltaMode?(o*=E,r*=E):(o*=L,r*=L)),o&&!n&&(n=o<1?-1:1),r&&!t&&(t=r<1?-1:1),{spinX:n,spinY:t,pixelX:o,pixelY:r}}C.getEventType=function(){return y.firefox()?"DOMMouseScroll":S("wheel")?"wheel":"mousewheel"};var M=C;function k(e){return 100*e+"%"}var T=!1;try{var X=Object.defineProperty({},"passive",{get:function(){T=!0}});window.addEventListener("test",null,X)}catch(e){}var _,Y,B,D,W,N="MutationObserver"in window,U="mousemove",O="mouseup",H={name:"scrolly",props:{parentScroll:{type:Boolean,default:!0},passiveScroll:{type:Boolean,default:!1}},data:function(){return{container:null,viewport:null,barX:null,barY:null,onMouseWheelHandler:null,onDomChangeHandler:null,mutationObserver:null,isScrolling:!1,touchStartX:null,touchStartY:null}},computed:{classnames:function(){return["scrolly",this.isScrolling?"is-scrolling":""]}},mounted:function(){this.$nextTick(function(){for(var e,n,t,o,r=this.$el,i=r.childNodes,a=0;o=i[a++];){var s=o.className;s&&(s.match("scrolly-viewport")&&(e=o),s.match("axis-x")&&(n=o),s.match("axis-y")&&(t=o))}if(e&&(n||t)){var l=this.onMouseWheel.bind(this),c=!!this.parentScroll&&this.passiveScroll;r.addEventListener("wheel",l,!!T&&{passive:c});var d=this.onKeyDown.bind(this);r.addEventListener("keydown",d),r.addEventListener("touchstart",this.onTouchStart),r.addEventListener("touchend",this.onTouchEnd),r.addEventListener("touchmove",this.onTouchMove,!!T&&{passive:c});var h,u=this.onDomChange.bind(this);N?(h=new MutationObserver(u)).observe(e,{childList:!0,characterData:!0,subtree:!0,attributes:!0}):(e.addEventListener("DOMSubtreeModified",u),e.addEventListener("propertychange",u)),Object.assign(this,{container:r,viewport:e,barX:n,barY:t,onMouseWheelHandler:l,onDomChangeHandler:u,mutationObserver:h})}})},methods:{onMouseEnter:function(){this.refreshScrollLayout()},onMouseDown:function(e){var n=e.target,t=e.pageX,o=e.pageY,r=n.className;if(r.match("scrolly-bar")){var i={},a=this,s=this.barX,l=this.barY,c=(this.container,this.viewport),d=window.addEventListener,h=window.removeEventListener,u=r.match("axis-x"),A=r.match("axis-y"),p=n.offsetTop,v=n.offsetLeft;a.isScrolling=!0,d("mousemove",f),d("mouseup",function e(){a.isScrolling=!1,h(O,e),h(U,f)})}function f(e){e.preventDefault();var r=e.pageX,d=e.pageY;if(u){var h=c.scrollLeft,f=c.scrollWidth,m=c.offsetWidth,b=n.offsetWidth,y=m-b,g=v+(r-t);g<0&&(g=0),g>y&&(g=y),n.style.left=k(g/m),c.scrollLeft=g/y*(f-m);var w=g<0,S=g>y,x=w||S;i.x=s.scrollLayout={barX:s,scrollLeft:h,scrollWidth:f,viewportWidth:m,barWidth:b,barLeft:g,minBarLeft:0,maxBarLeft:y,visible:!0,onLeftEdge:w,onRightEdge:S,onEdge:x,canUnlockParentScroll:!1,canScrollParent:!1}}if(A){var E=c.scrollTop,L=c.scrollHeight,C=c.offsetHeight,M=n.offsetHeight,T=C-M,X=p+(d-o);X<0&&(X=0),X>T&&(X=T),n.style.top=k(X/C),c.scrollTop=X/T*(L-C);var _=X<=0,Y=X>=T,B=_||Y;i.y=l.scrollLayout={barY:l,scrollTop:E,scrollHeight:L,viewportHeight:C,barHeight:M,barTop:X,minBarTop:0,maxBarTop:T,onTopEdge:_,onBottomEdge:Y,onEdge:B,visible:!0,canUnlockParentScroll:!1,canScrollParent:!1,scrolled:!0}}a.$emit("scrollchange",i)}},onTouchStart:function(e){this.touchStartX=e.touches[0].pageX,this.touchStartY=e.touches[0].pageY},onTouchEnd:function(){this.touchStartX=null,this.touchStartY=null},onTouchMove:function(e){this.touchStartX||(this.touchStartX=e.touches[0].pageX,this.touchStartY=e.touches[0].pageY);var n=-(e.touches[0].pageX-this.touchStartX),t=-(e.touches[0].pageY-this.touchStartY);this.touchStartX=e.touches[0].pageX,this.touchStartY=e.touches[0].pageY;var o=this.refreshScrollLayout(n,t),r=o.x,i=o.y;if(!this.passiveScroll){var a=r&&r.canScrollParent,s=i&&i.canScrollParent;(!this.parentScroll||!a&&!s)&&e.preventDefault()}},onMouseWheel:function(e){var n=M(e),t=n.pixelX,o=n.pixelY,r=this.refreshScrollLayout(t,o),i=r.x,a=r.y;if(!this.passiveScroll){var s=i&&i.canScrollParent,l=a&&a.canScrollParent;(!this.parentScroll||!s&&!l)&&e.preventDefault()}},onMouseLeave:function(e){var n=this.barX,t=this.barY;n&&(n.scrollLayout=null),t&&(t.scrollLayout=null)},onKeyDown:function(e){var n=this.container;switch(e.which){case 37:this.refreshScrollLayout(-20,0);break;case 38:this.refreshScrollLayout(0,-20);break;case 39:this.refreshScrollLayout(20,0);break;case 40:this.refreshScrollLayout(0,20);break;case 33:this.refreshScrollLayout(0,10-n.clientHeight);break;case 34:this.refreshScrollLayout(0,n.clientHeight-10);break;default:return}},onDomChange:(_=function(){this.refreshScrollLayout()},Y=250,Y||(Y=250),function(){var e=B||this,n=+new Date,t=arguments;D&&n<D+Y?(clearTimeout(W),W=setTimeout(function(){D=n,_.apply(e,t)},Y)):(D=n,_.apply(e,t))}),refreshScrollLayout:function(e,n){void 0===e&&(e=0),void 0===n&&(n=0);var t={},o=this.viewport,r=this.barX,i=this.barY;if(r){var a=0!==e;o.scrollLeft+=e;var s=o.scrollLeft,l=o.scrollWidth,c=o.offsetWidth,d=r.style;d.visibility="hidden",d.display="block",d.width=k(c/l);var h=r.offsetWidth,u=c-h,A=s/(l-c)*u||0,p=A<0,v=A>u,f=p||v;p&&(A=0),v&&(A=u),d.left=k(A/c);var m=h<c;d.display=m?"block":"none",d.visibility="visible";var b=Math.abs(e)>25,y=r.scrollLayout||{},g=y.onEdge,w=y.canUnlockParentScroll,S=!!(y.canScrollParent||g&&w);t.x=r.scrollLayout={barX:r,scrollLeft:s,scrollWidth:l,viewportWidth:c,barWidth:h,barLeft:A,minBarLeft:0,maxBarLeft:u,visible:m,onLeftEdge:p,onRightEdge:v,onEdge:f,visible:m,canUnlockParentScroll:b,canScrollParent:S,scrolled:a}}if(i){var x=0!==n;o.scrollTop+=n;var E=o.scrollTop,L=o.scrollHeight,C=o.offsetHeight,M=i.style;M.visibility="hidden",M.display="block",M.height=k(C/L);var T=i.offsetHeight,X=C-T,_=E/(L-C)*X||0,Y=_<=0,B=_>=X,D=Y||B;Y&&(_=0),B&&(_=X),M.top=k(_/C);var W=T<C;M.display=W?"block":"none",M.visibility="visible";var N=Math.abs(n)>25,U=i.scrollLayout||{},O=U.onEdge,H=U.canUnlockParentScroll,P=U.canScrollParent,F=!(!D||!(P||O&&H));t.y=i.scrollLayout={barY:i,scrollTop:E,scrollHeight:L,viewportHeight:C,barHeight:T,barTop:_,minBarTop:0,maxBarTop:X,onTopEdge:Y,onBottomEdge:B,onEdge:D,visible:W,canUnlockParentScroll:N,canScrollParent:F,scrolled:x}}return this.$emit("scrollchange",t),t}},beforeDestroy:function(){var e=this.container,n=this.viewport,t=(this.barX,this.barY,this.onMouseWheelHandler),o=this.onDomChangeHandler,r=this.mutationObserver;r&&r.disconnect(),N||(n.removeEventListener("DOMSubtreeModified",o),n.removeEventListener("propertychange",o)),e.removeEventListener("wheel",t)}};var P=function(e,n,t,o,r,i,a,s,l,c){"boolean"!=typeof a&&(l=s,s=a,a=!1);var d,h="function"==typeof t?t.options:t;if(e&&e.render&&(h.render=e.render,h.staticRenderFns=e.staticRenderFns,h._compiled=!0,r&&(h.functional=!0)),o&&(h._scopeId=o),i?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(i)},h._ssrRegister=d):n&&(d=a?function(){n.call(this,c(this.$root.$options.shadowRoot))}:function(e){n.call(this,s(e))}),d)if(h.functional){var u=h.render;h.render=function(e,n){return d.call(n),u(e,n)}}else{var A=h.beforeCreate;h.beforeCreate=A?[].concat(A,d):[d]}return t},F="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());var I=document.head||document.getElementsByTagName("head")[0],$={};var R=function(e){return function(e,n){return function(e,n){var t=F?n.media||"default":e,o=$[t]||($[t]={ids:new Set,styles:[]});if(!o.ids.has(e)){o.ids.add(e);var r=n.source;if(n.map&&(r+="\n/*# sourceURL="+n.map.sources[0]+" */",r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n.map))))+" */"),o.element||(o.element=document.createElement("style"),o.element.type="text/css",n.media&&o.element.setAttribute("media",n.media),I.appendChild(o.element)),"styleSheet"in o.element)o.styles.push(r),o.element.styleSheet.cssText=o.styles.filter(Boolean).join("\n");else{var i=o.ids.size-1,a=document.createTextNode(r),s=o.element.childNodes;s[i]&&o.element.removeChild(s[i]),s.length?o.element.insertBefore(a,s[i]):o.element.appendChild(a)}}}(e,n)}},z=H,V=function(){var e=this.$createElement;return(this._self._c||e)("div",{class:this.classnames,attrs:{tabindex:"1"},on:{mouseenter:this.onMouseEnter,mousedown:this.onMouseDown,mouseleave:this.onMouseLeave,touchstart:this.onTouchStart}},[this._t("default")],2)};V._withStripped=!0;var j=P({render:V,staticRenderFns:[]},function(e){e&&e("data-v-466af7de_0",{source:'.scrolly {\n  position: relative;\n}\n.scrolly .scrolly-bar {\n    opacity: 0;\n}\n.scrolly:hover .scrolly-bar, .scrolly.is-scrolling .scrolly-bar {\n    opacity: 1;\n}\n.scrolly-viewport {\n  position: absolute;\n  overflow: hidden;\n  width: 100%;\n  height: 100%;\n  z-index: 1;\n}\n.scrolly-bar {\n  position: absolute;\n  border: 7px solid transparent;\n  cursor: pointer;\n  z-index: 2;\n  transition: opacity .1s ease;\n}\n.scrolly-bar:before {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    content: " ";\n    background: rgba(0, 0, 0, 0.3);\n    border-radius: 7px;\n    transition: background .2s ease;\n}\n.scrolly-bar:hover:before {\n    background: rgba(0, 0, 0, 0.6);\n}\n.scrolly-bar.axis-x {\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  height: 21px;\n  min-width: 20%;\n  max-width: 100%;\n}\n.scrolly-bar.axis-y {\n  top: 0;\n  right: 0;\n  width: 21px;\n  height: 100%;\n  min-height: 20%;\n  max-height: 100%;\n}\n\n/*# sourceMappingURL=Scrolly.vue.map */',map:{version:3,sources:["/home/leo/work/vue-scrolly/src/Scrolly.vue","Scrolly.vue"],names:[],mappings:"AAWA;EACA,kBAAA;AAAA;AADA;IAIA,UAAA;AAAA;AAJA;IAUA,UAAA;AAAA;AAKA;EACA,kBAAA;EACA,gBAAA;EACA,WAAA;EACA,YAAA;EACA,UAAA;AAAA;AAGA;EACA,kBAAA;EACA,6BAAA;EACA,eAAA;EACA,UAAA;EACA,4BAAA;AAAA;AALA;IAQA,kBAAA;IACA,WAAA;IACA,YAAA;IACA,YAAA;IACA,8BAAA;IACA,kBAtCA;IAuCA,+BAAA;AAAA;AAdA;IAmBA,8BAAA;AAAA;AAKA;EACA,OAAA;EACA,SAAA;EACA,WAAA;EACA,YAAA;EACA,cAAA;EACA,eAAA;AAAA;AAGA;EACA,MAAA;EACA,QAAA;EACA,WAAA;EACA,YAAA;EACA,eAAA;EACA,gBAAA;AAAA;;AC1BA,sCAAsC",file:"Scrolly.vue",sourcesContent:['<template>\n<div :class="classnames" @mouseenter="onMouseEnter" @mousedown="onMouseDown" @mouseleave="onMouseLeave" @touchstart="onTouchStart" tabindex="1">\n  <slot></slot>\n</div>\n</template>\n\n<script src="./Scrolly.js"><\/script>\n\n<style lang="scss">\n$scrolly-bar-size: 7px;\n\n.scrolly {\n  position: relative;\n\n  .scrolly-bar {\n    opacity: 0;\n  }\n\n  &:hover,\n  &.is-scrolling {\n    .scrolly-bar {\n      opacity: 1;\n    }\n  }\n}\n\n.scrolly-viewport {\n  position: absolute;\n  overflow: hidden;\n  width: 100%;\n  height: 100%;\n  z-index: 1;\n}\n\n.scrolly-bar {\n  position: absolute;\n  border: $scrolly-bar-size solid transparent;\n  cursor: pointer;\n  z-index: 2;\n  transition: opacity .1s ease;\n\n  &:before {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    content: " ";\n    background: rgba(0, 0, 0, 0.3);\n    border-radius: $scrolly-bar-size;\n    transition: background .2s ease;\n  }\n\n  &:hover {\n    &:before {\n      background: rgba(0, 0, 0, 0.6);\n    }\n  }\n}\n\n.scrolly-bar.axis-x {\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  height: $scrolly-bar-size * 3;\n  min-width: 20%;\n  max-width: 100%;\n}\n\n.scrolly-bar.axis-y {\n  top: 0;\n  right: 0;\n  width: $scrolly-bar-size * 3;\n  height: 100%;\n  min-height: 20%;\n  max-height: 100%;\n}\n</style>\n','.scrolly {\n  position: relative; }\n  .scrolly .scrolly-bar {\n    opacity: 0; }\n  .scrolly:hover .scrolly-bar, .scrolly.is-scrolling .scrolly-bar {\n    opacity: 1; }\n\n.scrolly-viewport {\n  position: absolute;\n  overflow: hidden;\n  width: 100%;\n  height: 100%;\n  z-index: 1; }\n\n.scrolly-bar {\n  position: absolute;\n  border: 7px solid transparent;\n  cursor: pointer;\n  z-index: 2;\n  transition: opacity .1s ease; }\n  .scrolly-bar:before {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    content: " ";\n    background: rgba(0, 0, 0, 0.3);\n    border-radius: 7px;\n    transition: background .2s ease; }\n  .scrolly-bar:hover:before {\n    background: rgba(0, 0, 0, 0.6); }\n\n.scrolly-bar.axis-x {\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  height: 21px;\n  min-width: 20%;\n  max-width: 100%; }\n\n.scrolly-bar.axis-y {\n  top: 0;\n  right: 0;\n  width: 21px;\n  height: 100%;\n  min-height: 20%;\n  max-height: 100%; }\n\n/*# sourceMappingURL=Scrolly.vue.map */']},media:void 0})},z,void 0,!1,void 0,R,void 0),K={name:"scrolly-viewport",computed:{classnames:function(){return["scrolly-viewport"]}}},G=function(){var e=this.$createElement;return(this._self._c||e)("div",{class:this.classnames},[this._t("default")],2)};G._withStripped=!0;var J=P({render:G,staticRenderFns:[]},void 0,K,void 0,!1,void 0,void 0,void 0),Q={name:"scrolly-bar",props:{axis:{type:String,default:"y"}},computed:{classnames:function(){return["scrolly-bar","axis-"+this.axis]}}},Z=function(){var e=this.$createElement;return(this._self._c||e)("div",{class:this.classnames},[this._t("default")],2)};Z._withStripped=!0;var q=P({render:Z,staticRenderFns:[]},void 0,Q,void 0,!1,void 0,void 0,void 0);"undefined"!=typeof window&&window.Vue&&(window.Vue.component("scrolly",j),window.Vue.component("scrolly-viewport",J),window.Vue.component("scrolly-bar",q));export{j as Scrolly,J as ScrollyViewport,q as ScrollyBar};
