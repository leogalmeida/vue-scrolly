!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e=e||self).Scrolly={})}(this,function(e){"use strict";var i,a,s,l,c,d,u,h,A,p,f,v,m,b,y,g=!1;function n(){if(!g){g=!0;var e=navigator.userAgent,n=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(e),t=/(Mac OS X)|(Windows)|(Linux)/.exec(e);if(v=/\b(iPhone|iP[ao]d)/.exec(e),m=/\b(iP[ao]d)/.exec(e),p=/Android/i.exec(e),b=/FBAN\/\w+;/i.exec(e),y=/Mobile/i.exec(e),f=!!/Win64/.exec(e),n){(i=n[1]?parseFloat(n[1]):n[5]?parseFloat(n[5]):NaN)&&document&&document.documentMode&&(i=document.documentMode);var o=/(?:Trident\/(\d+.\d+))/.exec(e);d=o?parseFloat(o[1])+4:i,a=n[2]?parseFloat(n[2]):NaN,s=n[3]?parseFloat(n[3]):NaN,l=n[4]?parseFloat(n[4]):NaN,c=l?(n=/(?:Chrome\/(\d+\.\d+))/.exec(e))&&n[1]?parseFloat(n[1]):NaN:NaN}else i=a=s=c=l=NaN;if(t){if(t[1]){var r=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(e);u=!r||parseFloat(r[1].replace("_","."))}else u=!1;h=!!t[2],A=!!t[3]}else u=h=A=!1}}var w,t={ie:function(){return n()||i},ieCompatibilityMode:function(){return n()||i<d},ie64:function(){return t.ie()&&f},firefox:function(){return n()||a},opera:function(){return n()||s},webkit:function(){return n()||l},safari:function(){return t.webkit()},chrome:function(){return n()||c},windows:function(){return n()||h},osx:function(){return n()||u},linux:function(){return n()||A},iphone:function(){return n()||v},mobile:function(){return n()||v||m||p||y},nativeApp:function(){return n()||b},android:function(){return n()||p},ipad:function(){return n()||m}},o=t,r=!("undefined"==typeof window||!window.document||!window.document.createElement),S={canUseDOM:r,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:r&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:r&&!!window.screen,isInWorker:!r};S.canUseDOM&&(w=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("",""));var x=function(e,n){if(!S.canUseDOM||n&&!("addEventListener"in document))return!1;var t="on"+e,o=t in document;if(!o){var r=document.createElement("div");r.setAttribute(t,"return;"),o="function"==typeof r[t]}return!o&&w&&"wheel"===e&&(o=document.implementation.hasFeature("Events.wheel","3.0")),o};function E(e){var n=0,t=0,o=0,r=0;return"detail"in e&&(t=e.detail),"wheelDelta"in e&&(t=-e.wheelDelta/120),"wheelDeltaY"in e&&(t=-e.wheelDeltaY/120),"wheelDeltaX"in e&&(n=-e.wheelDeltaX/120),"axis"in e&&e.axis===e.HORIZONTAL_AXIS&&(n=t,t=0),o=10*n,r=10*t,"deltaY"in e&&(r=e.deltaY),"deltaX"in e&&(o=e.deltaX),(o||r)&&e.deltaMode&&(1==e.deltaMode?(o*=40,r*=40):(o*=800,r*=800)),o&&!n&&(n=o<1?-1:1),r&&!t&&(t=r<1?-1:1),{spinX:n,spinY:t,pixelX:o,pixelY:r}}E.getEventType=function(){return o.firefox()?"DOMMouseScroll":x("wheel")?"wheel":"mousewheel"};var L=E;function F(e){return 100*e+"%"}var C=!1;try{var M=Object.defineProperty({},"passive",{get:function(){C=!0}});window.addEventListener("test",null,M)}catch(e){}var k,T,_,X,Y,B="MutationObserver"in window,D="DOMSubtreeModified",W="propertychange",N="wheel",U={name:"scrolly",props:{parentScroll:{type:Boolean,default:!0},passiveScroll:{type:Boolean,default:!1}},data:function(){return{container:null,viewport:null,barX:null,barY:null,onMouseWheelHandler:null,onDomChangeHandler:null,mutationObserver:null,isScrolling:!1,touchStartX:null,touchStartY:null}},computed:{classnames:function(){return["scrolly",this.isScrolling?"is-scrolling":""]}},mounted:function(){this.$nextTick(function(){for(var e,n,t,o,r=this.$el,i=r.childNodes,a=0;o=i[a++];){var s=o.className;s&&(s.match("scrolly-viewport")&&(e=o),s.match("axis-x")&&(n=o),s.match("axis-y")&&(t=o))}if(e&&(n||t)){var l=this.onMouseWheel.bind(this),c=!!this.parentScroll&&this.passiveScroll;r.addEventListener(N,l,!!C&&{passive:c});var d=this.onKeyDown.bind(this);r.addEventListener("keydown",d),r.addEventListener("touchstart",this.onTouchStart),r.addEventListener("touchend",this.onTouchEnd),r.addEventListener("touchmove",this.onTouchMove,!!C&&{passive:c});var u,h=this.onDomChange.bind(this);B?(u=new MutationObserver(h)).observe(e,{childList:!0,characterData:!0,subtree:!0,attributes:!0}):(e.addEventListener(D,h),e.addEventListener(W,h)),Object.assign(this,{container:r,viewport:e,barX:n,barY:t,onMouseWheelHandler:l,onDomChangeHandler:h,mutationObserver:u})}})},methods:{onMouseEnter:function(){this.refreshScrollLayout()},onMouseDown:function(e){var w=e.target,S=e.pageX,x=e.pageY,n=w.className;if(n.match("scrolly-bar")){var E={},L=this,C=this.barX,M=this.barY,k=(this.container,this.viewport),t=window.addEventListener,o=window.removeEventListener,T=n.match("axis-x"),_=n.match("axis-y"),X=w.offsetTop,Y=w.offsetLeft;L.isScrolling=!0,t("mousemove",r),t("mouseup",function e(){L.isScrolling=!1,o("mouseup",e),o("mousemove",r)})}function r(e){e.preventDefault();var n=e.pageX,t=e.pageY;if(T){var o=k.scrollLeft,r=k.scrollWidth,i=k.offsetWidth,a=w.offsetWidth,s=i-a,l=Y+(n-S);l<0&&(l=0),s<l&&(l=s),w.style.left=F(l/i),k.scrollLeft=l/s*(r-i);var c=l<0,d=s<l,u=c||d;E.x=C.scrollLayout={barX:C,scrollLeft:o,scrollWidth:r,viewportWidth:i,barWidth:a,barLeft:l,minBarLeft:0,maxBarLeft:s,visible:!0,onLeftEdge:c,onRightEdge:d,onEdge:u,canUnlockParentScroll:!1,canScrollParent:!1}}if(_){var h=k.scrollTop,A=k.scrollHeight,p=k.offsetHeight,f=w.offsetHeight,v=p-f,m=X+(t-x);m<0&&(m=0),v<m&&(m=v),w.style.top=F(m/p),k.scrollTop=m/v*(A-p);var b=m<=0,y=v<=m,g=b||y;E.y=M.scrollLayout={barY:M,scrollTop:h,scrollHeight:A,viewportHeight:p,barHeight:f,barTop:m,minBarTop:0,maxBarTop:v,onTopEdge:b,onBottomEdge:y,onEdge:g,visible:!0,canUnlockParentScroll:!1,canScrollParent:!1,scrolled:!0}}L.$emit("scrollchange",E)}},onTouchStart:function(e){this.touchStartX=e.touches[0].pageX,this.touchStartY=e.touches[0].pageY},onTouchEnd:function(){this.touchStartX=null,this.touchStartY=null},onTouchMove:function(e){this.touchStartX||(this.touchStartX=e.touches[0].pageX,this.touchStartY=e.touches[0].pageY);var n=-(e.touches[0].pageX-this.touchStartX),t=-(e.touches[0].pageY-this.touchStartY);this.touchStartX=e.touches[0].pageX,this.touchStartY=e.touches[0].pageY;var o=this.refreshScrollLayout(n,t),r=o.x,i=o.y;if(!this.passiveScroll){var a=r&&r.canScrollParent,s=i&&i.canScrollParent;(!this.parentScroll||!a&&!s)&&e.preventDefault()}},onMouseWheel:function(e){var n=L(e),t=n.pixelX,o=n.pixelY,r=this.refreshScrollLayout(t,o),i=r.x,a=r.y;if(!this.passiveScroll){var s=i&&i.canScrollParent,l=a&&a.canScrollParent;(!this.parentScroll||!s&&!l)&&e.preventDefault()}},onMouseLeave:function(e){var n=this.barX,t=this.barY;n&&(n.scrollLayout=null),t&&(t.scrollLayout=null)},onKeyDown:function(e){var n=this.container;switch(e.which){case 37:this.refreshScrollLayout(-20,0);break;case 38:this.refreshScrollLayout(0,-20);break;case 39:this.refreshScrollLayout(20,0);break;case 40:this.refreshScrollLayout(0,20);break;case 33:this.refreshScrollLayout(0,10-n.clientHeight);break;case 34:this.refreshScrollLayout(0,n.clientHeight-10);break;default:return}},onDomChange:(k=function(){this.refreshScrollLayout()},T=250,T||(T=250),function(){var e=_||this,n=+new Date,t=arguments;X&&n<X+T?(clearTimeout(Y),Y=setTimeout(function(){X=n,k.apply(e,t)},T)):(X=n,k.apply(e,t))}),refreshScrollLayout:function(e,n){void 0===e&&(e=0),void 0===n&&(n=0);var t={},o=this.viewport,r=this.barX,i=this.barY;if(r){var a=0!==e;o.scrollLeft+=e;var s=o.scrollLeft,l=o.scrollWidth,c=o.offsetWidth,d=r.style;d.visibility="hidden",d.display="block",d.width=F(c/l);var u=r.offsetWidth,h=c-u,A=s/(l-c)*h||0,p=A<0,f=h<A,v=p||f;p&&(A=0),f&&(A=h),d.left=F(A/c);var m=u<c;d.display=m?"block":"none",d.visibility="visible";var b=25<Math.abs(e),y=r.scrollLayout||{},g=y.onEdge,w=y.canUnlockParentScroll,S=!!(y.canScrollParent||g&&w);t.x=r.scrollLayout={barX:r,scrollLeft:s,scrollWidth:l,viewportWidth:c,barWidth:u,barLeft:A,minBarLeft:0,maxBarLeft:h,visible:m,onLeftEdge:p,onRightEdge:f,onEdge:v,visible:m,canUnlockParentScroll:b,canScrollParent:S,scrolled:a}}if(i){var x=0!==n;o.scrollTop+=n;var E=o.scrollTop,L=o.scrollHeight,C=o.offsetHeight,M=i.style;M.visibility="hidden",M.display="block",M.height=F(C/L);var k=i.offsetHeight,T=C-k,_=E/(L-C)*T||0,X=_<=0,Y=T<=_,B=X||Y;X&&(_=0),Y&&(_=T),M.top=F(_/C);var D=k<C;M.display=D?"block":"none",M.visibility="visible";var W=25<Math.abs(n),N=i.scrollLayout||{},U=N.onEdge,O=N.canUnlockParentScroll,P=N.canScrollParent,H=!(!B||!(P||U&&O));t.y=i.scrollLayout={barY:i,scrollTop:E,scrollHeight:L,viewportHeight:C,barHeight:k,barTop:_,minBarTop:0,maxBarTop:T,onTopEdge:X,onBottomEdge:Y,onEdge:B,visible:D,canUnlockParentScroll:W,canScrollParent:H,scrolled:x}}return this.$emit("scrollchange",t),t}},beforeDestroy:function(){var e=this,n=e.container,t=e.viewport,o=(e.barX,e.barY,e.onMouseWheelHandler),r=e.onDomChangeHandler,i=e.mutationObserver;i&&i.disconnect(),B||(t.removeEventListener(D,r),t.removeEventListener(W,r)),n.removeEventListener(N,o)}};var O=function(e,n,t,o,r,i,a,s,l,c){"boolean"!=typeof a&&(l=s,s=a,a=!1);var d,u="function"==typeof t?t.options:t;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,r&&(u.functional=!0)),o&&(u._scopeId=o),i?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,l(e)),e&&e._registeredComponents&&e._registeredComponents.add(i)},u._ssrRegister=d):n&&(d=a?function(){n.call(this,c(this.$root.$options.shadowRoot))}:function(e){n.call(this,s(e))}),d)if(u.functional){var h=u.render;u.render=function(e,n){return d.call(n),h(e,n)}}else{var A=u.beforeCreate;u.beforeCreate=A?[].concat(A,d):[d]}return t},P="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());var H=document.head||document.getElementsByTagName("head")[0],I={};var $=function(e){return function(e,n){return function(e,n){var t=P?n.media||"default":e,o=I[t]||(I[t]={ids:new Set,styles:[]});if(!o.ids.has(e)){o.ids.add(e);var r=n.source;if(n.map&&(r+="\n/*# sourceURL="+n.map.sources[0]+" */",r+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n.map))))+" */"),o.element||(o.element=document.createElement("style"),o.element.type="text/css",n.media&&o.element.setAttribute("media",n.media),H.appendChild(o.element)),"styleSheet"in o.element)o.styles.push(r),o.element.styleSheet.cssText=o.styles.filter(Boolean).join("\n");else{var i=o.ids.size-1,a=document.createTextNode(r),s=o.element.childNodes;s[i]&&o.element.removeChild(s[i]),s.length?o.element.insertBefore(a,s[i]):o.element.appendChild(a)}}}(e,n)}},R=U,z=function(){var e=this,n=e.$createElement;return(e._self._c||n)("div",{class:e.classnames,attrs:{tabindex:"1"},on:{mouseenter:e.onMouseEnter,mousedown:e.onMouseDown,mouseleave:e.onMouseLeave,touchstart:e.onTouchStart}},[e._t("default")],2)},V=(z._withStripped=!0,O({render:z,staticRenderFns:[]},function(e){e&&e("data-v-466af7de_0",{source:'.scrolly {\n  position: relative;\n}\n.scrolly .scrolly-bar {\n    opacity: 0;\n}\n.scrolly:hover .scrolly-bar, .scrolly.is-scrolling .scrolly-bar {\n    opacity: 1;\n}\n.scrolly-viewport {\n  position: absolute;\n  overflow: hidden;\n  width: 100%;\n  height: 100%;\n  z-index: 1;\n}\n.scrolly-bar {\n  position: absolute;\n  border: 7px solid transparent;\n  cursor: pointer;\n  z-index: 2;\n  transition: opacity .1s ease;\n}\n.scrolly-bar:before {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    content: " ";\n    background: rgba(0, 0, 0, 0.3);\n    border-radius: 7px;\n    transition: background .2s ease;\n}\n.scrolly-bar:hover:before {\n    background: rgba(0, 0, 0, 0.6);\n}\n.scrolly-bar.axis-x {\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  height: 21px;\n  min-width: 20%;\n  max-width: 100%;\n}\n.scrolly-bar.axis-y {\n  top: 0;\n  right: 0;\n  width: 21px;\n  height: 100%;\n  min-height: 20%;\n  max-height: 100%;\n}\n\n/*# sourceMappingURL=Scrolly.vue.map */',map:{version:3,sources:["/home/leo/work/vue-scrolly/src/Scrolly.vue","Scrolly.vue"],names:[],mappings:"AAWA;EACA,kBAAA;AAAA;AADA;IAIA,UAAA;AAAA;AAJA;IAUA,UAAA;AAAA;AAKA;EACA,kBAAA;EACA,gBAAA;EACA,WAAA;EACA,YAAA;EACA,UAAA;AAAA;AAGA;EACA,kBAAA;EACA,6BAAA;EACA,eAAA;EACA,UAAA;EACA,4BAAA;AAAA;AALA;IAQA,kBAAA;IACA,WAAA;IACA,YAAA;IACA,YAAA;IACA,8BAAA;IACA,kBAtCA;IAuCA,+BAAA;AAAA;AAdA;IAmBA,8BAAA;AAAA;AAKA;EACA,OAAA;EACA,SAAA;EACA,WAAA;EACA,YAAA;EACA,cAAA;EACA,eAAA;AAAA;AAGA;EACA,MAAA;EACA,QAAA;EACA,WAAA;EACA,YAAA;EACA,eAAA;EACA,gBAAA;AAAA;;AC1BA,sCAAsC",file:"Scrolly.vue",sourcesContent:['<template>\n<div :class="classnames" @mouseenter="onMouseEnter" @mousedown="onMouseDown" @mouseleave="onMouseLeave" @touchstart="onTouchStart" tabindex="1">\n  <slot></slot>\n</div>\n</template>\n\n<script src="./Scrolly.js"><\/script>\n\n<style lang="scss">\n$scrolly-bar-size: 7px;\n\n.scrolly {\n  position: relative;\n\n  .scrolly-bar {\n    opacity: 0;\n  }\n\n  &:hover,\n  &.is-scrolling {\n    .scrolly-bar {\n      opacity: 1;\n    }\n  }\n}\n\n.scrolly-viewport {\n  position: absolute;\n  overflow: hidden;\n  width: 100%;\n  height: 100%;\n  z-index: 1;\n}\n\n.scrolly-bar {\n  position: absolute;\n  border: $scrolly-bar-size solid transparent;\n  cursor: pointer;\n  z-index: 2;\n  transition: opacity .1s ease;\n\n  &:before {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    content: " ";\n    background: rgba(0, 0, 0, 0.3);\n    border-radius: $scrolly-bar-size;\n    transition: background .2s ease;\n  }\n\n  &:hover {\n    &:before {\n      background: rgba(0, 0, 0, 0.6);\n    }\n  }\n}\n\n.scrolly-bar.axis-x {\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  height: $scrolly-bar-size * 3;\n  min-width: 20%;\n  max-width: 100%;\n}\n\n.scrolly-bar.axis-y {\n  top: 0;\n  right: 0;\n  width: $scrolly-bar-size * 3;\n  height: 100%;\n  min-height: 20%;\n  max-height: 100%;\n}\n</style>\n','.scrolly {\n  position: relative; }\n  .scrolly .scrolly-bar {\n    opacity: 0; }\n  .scrolly:hover .scrolly-bar, .scrolly.is-scrolling .scrolly-bar {\n    opacity: 1; }\n\n.scrolly-viewport {\n  position: absolute;\n  overflow: hidden;\n  width: 100%;\n  height: 100%;\n  z-index: 1; }\n\n.scrolly-bar {\n  position: absolute;\n  border: 7px solid transparent;\n  cursor: pointer;\n  z-index: 2;\n  transition: opacity .1s ease; }\n  .scrolly-bar:before {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    content: " ";\n    background: rgba(0, 0, 0, 0.3);\n    border-radius: 7px;\n    transition: background .2s ease; }\n  .scrolly-bar:hover:before {\n    background: rgba(0, 0, 0, 0.6); }\n\n.scrolly-bar.axis-x {\n  left: 0;\n  bottom: 0;\n  width: 100%;\n  height: 21px;\n  min-width: 20%;\n  max-width: 100%; }\n\n.scrolly-bar.axis-y {\n  top: 0;\n  right: 0;\n  width: 21px;\n  height: 100%;\n  min-height: 20%;\n  max-height: 100%; }\n\n/*# sourceMappingURL=Scrolly.vue.map */']},media:void 0})},R,void 0,!1,void 0,$,void 0)),j={name:"scrolly-viewport",computed:{classnames:function(){return["scrolly-viewport"]}}},K=function(){var e=this.$createElement;return(this._self._c||e)("div",{class:this.classnames},[this._t("default")],2)},G=(K._withStripped=!0,O({render:K,staticRenderFns:[]},void 0,j,void 0,!1,void 0,void 0,void 0)),J={name:"scrolly-bar",props:{axis:{type:String,default:"y"}},computed:{classnames:function(){return["scrolly-bar","axis-"+this.axis]}}},Q=function(){var e=this.$createElement;return(this._self._c||e)("div",{class:this.classnames},[this._t("default")],2)},Z=(Q._withStripped=!0,O({render:Q,staticRenderFns:[]},void 0,J,void 0,!1,void 0,void 0,void 0));"undefined"!=typeof window&&window.Vue&&(window.Vue.component("scrolly",V),window.Vue.component("scrolly-viewport",G),window.Vue.component("scrolly-bar",Z)),e.Scrolly=V,e.ScrollyViewport=G,e.ScrollyBar=Z,Object.defineProperty(e,"__esModule",{value:!0})});
